var doc=document,ie4=document.all,opera=window.opera,innerLayer,layer,x,y,doWheel=!1,offsetX=15,offsetY=5,tickerc=0,mTimer=new Array,tickerTo=new Array,tickerSpeed=new Array,isIE=!1,isWin=!1,isOpera=!1,$=jQuery,DZCP={init:function(){doc.body.id="dzcp-engine-1.7",DZCP.DebugLogger("Load DZCP-Engine 1.7"),isIE=-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,isWin=-1!=navigator.appVersion.toLowerCase().indexOf("win")?!0:!1,isOpera=-1!=navigator.userAgent.indexOf("Opera")?!0:!1,$("body").append('<div id="infoDiv"></div>'),layer=$("#infoDiv")[0],doc.body.onmousemove=DZCP.trackMouse,dzcp_config.shoutInterval>1&&$("#navShout")[0]&&window.setInterval("$('#navShout').load('../inc/ajax.php?i=shoutbox');",dzcp_config.shoutInterval),DZCP.initLightbox(),$("#colorpicker").colorpicker(),$(".slidetabs").tabs(".images > div",{effect:"fade",rotate:!0}).slideshow(dzcp_config.slideshowInterval>1?{autoplay:!0,interval:dzcp_config.slideshowInterval}:{autoplay:!1,interval:6e3}),$(".tabs").tabs("> .switchs"),$(".tabs2").tabs(".switchs2 > div",{effect:"fade",rotate:!0})},initLightbox:function(){DZCP.DebugLogger("Initiation Lightbox"),$("a[rel^=lightbox]").magnificPopup({type:"image",gallery:{enabled:!0},mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(e){return e.is("img")?e:e.find("img")}}})},addEvent:function(e,t,i){if(e.addEventListener)return e.addEventListener(t,i,!1),!0;if(e.attachEvent){var n=e.attachEvent("on"+t,i);return n}return!1},trackMouse:function(e){if(innerLayer=$("#infoInnerLayer")[0],"object"==typeof layer){var t=doc.all,i=doc.getElementById&&!doc.all,n=5,a=-15;if(x=i?e.pageX-n:window.event.clientX+doc.documentElement.scrollLeft-n,y=i?e.pageY-a:window.event.clientY+doc.documentElement.scrollTop-a,innerLayer){var o=(t?innerLayer.offsetWidth:innerLayer.clientWidth)-3;t?innerLayer.offsetHeight:innerLayer.clientHeight}else{var o=(t?layer.clientWidth:layer.offsetWidth)-3;t?layer.clientHeight:layer.offsetHeight}{var r=i?window.innerWidth+window.pageXOffset-12:doc.documentElement.clientWidth+doc.documentElement.scrollLeft;i?window.innerHeight+window.pageYOffset:doc.documentElement.clientHeight+doc.documentElement.scrollTop}layer.style.left=(x+offsetX+o>=r-offsetX?x-(o+offsetX):x+offsetX)+"px",layer.style.top=y+offsetY+"px"}return!0},popup:function(e,t,i){t=parseInt(t),i=parseInt(i)+50,popup=window.open(e,"Popup","width=1,height=1,location=0,scrollbars=0,resizable=1,status=0"),popup.resizeTo(t,i),popup.moveTo((screen.width-t)/2,(screen.height-i)/2),popup.focus()},initGameServer:function(e){DZCP.initDynLoader("navGameServer_"+e,"server","&serverID="+e)},initTeamspeakServer:function(){DZCP.initDynLoader("navTeamspeakServer","teamspeak","")},initDynLoader:function(e,t,i){DZCP.DebugLogger("DynLoader -> Tag: '"+e+"' / URL: '../inc/ajax.php?i="+t+i+"'");var n=$.ajax({url:"../inc/ajax.php?i="+t+i,type:"GET",data:{},cache:!0,dataType:"html",contentType:"application/x-www-form-urlencoded;"});n.done(function(t){$("#"+e).html(t).hide().fadeIn("normal")})},initPageDynLoader:function(e,t){DZCP.DebugLogger("PageDynLoader -> Tag: '"+e+"' / URL: '"+t+"'");var i=$.ajax({url:t,type:"GET",data:{},cache:!0,dataType:"html",contentType:"application/x-www-form-urlencoded;"});i.done(function(t){$("#"+e).html(t).hide().fadeIn("normal"),DZCP.initLightbox()})},initDynCaptcha:function(e,t,i,n,a,o,r){var c="../inc/ajax.php?i=securimage";t>1&&(c=c+"&height="+t),i>1&&(c=c+"&width="+i),n>=1&&(c=c+"&lines="+n),a.length>1&&(c=c+"&namespace="+a),o>=1&&(c=c+"&length="+o),c=r>0?c+"&sid="+r:c+"&sid="+Math.random(),DZCP.DebugLogger("DynCaptcha -> Tag: '"+e+"' / URL: '"+c+"'");var l=$.ajax({url:c,type:"GET",data:{},cache:!1,dataType:"html",contentType:"application/x-www-form-urlencoded;"});l.done(function(t){$("#"+e).attr("src",t).hide().fadeIn("normal")})},EvalSound:function(e){DZCP.DebugLogger("EvalSound -> URL: '"+e+"'");var t=new Audio(e);t.play()},shoutSubmit:function(){return $.post("../shout/index.php?ajax",$("#shoutForm").serialize(),function(e){e&&alert(e.replace(/  /g," ")),$("#navShout").load("../inc/ajax.php?i=shoutbox"),e||$("#shouteintrag").prop("value","")}),!1},switchuser:function(){var e=doc.formChange.changeme.options[doc.formChange.changeme.selectedIndex].value;window.location.href=e},tempswitch:function(){var e=doc.form.tempswitch.options[doc.form.tempswitch.selectedIndex].value;"lazy"!=e&&DZCP.goTo(e)},autocomplete:function(e,t){DZCP.DebugLogger("Autocomplete -> URL: '../inc/ajax.php?i=autocomplete&type="+e+"&game="+i+"'");var i=$("#status :selected").val();$(document).load("../inc/ajax.php?i=autocomplete&type="+e+"&game="+i,function(e){var i=jQuery.parseJSON(e);""!=i.qport&&(t||""==$("#qport").val())&&($("#qport").val(i.qport),$("#autochanged").show())})},goTo:function(e,t){1==t?window.open(e):window.location.href=e},maxlength:function(e,t,i){e.value.length>i?e.value=e.value.substring(0,i):t.value=i-e.value.length},showInfo:function(e,t,i,n,a,o){if("object"==typeof layer){var r="";if(t&&i){for(var c=t.split(";"),l=i.split(";"),d="",s=0;s<c.length;++s)d=d+"<tr><td>"+c[s]+"</td><td>"+l[s]+"</td></tr>";r='<tr><td class="infoTop" colspan="2">'+e+"</td></tr>"+d}else r=t&&"undefined"==typeof i?'<tr><td class="infoTop" colspan="2">'+e+"</td></tr><tr><td>"+t+"</td></tr>":"<tr><td>"+e+"</td></tr>";var p="";p=n?'<tr><td colspan=2 align=center><img src="'+n+'" width="'+a+'" height="'+o+'" alt="" /></td></tr>':"",layer.innerHTML='<div id="hDiv">  <table class="hperc" cellspacing="0" style="height:100%">    <tr>      <td style="vertical-align:middle">        <div id="infoInnerLayer">          <table class="hperc" cellspacing="0">              '+r+"              "+p+"          </table>        </div>      </td>    </tr>  </table></div>",ie4&&!opera?(layer.innerHTML+='<iframe id="ieFix" frameborder="0" width="'+$("#hDiv")[0].offsetWidth+'" height="'+$("#hDiv")[0].offsetHeight+'"></iframe>',layer.style.display="block"):layer.style.display="block"}},showSteamBox:function(e,t,i,n,a){var o;switch(a){case 1:o="online";break;case 2:o="in-game";break;default:o="offline"}"object"==typeof layer&&(layer.innerHTML='<div id="hDiv">  <table class="hperc" cellspacing="0" style="height:100%">    <tr>      <td style="vertical-align:middle">        <div id="infoInnerLayer">             <table class="steam_box_bg" border="0" cellspacing="0" cellpadding="0">              <tr>                <td>                   <div class="steam_box steam_box_user '+o+'">                     <div class="steam_box_avatar '+o+'"> <img src="'+t+'" /></div>                     <div class="steam_box_content">'+e+'<br />                     <span class="friendSmallText">'+i+"<br>"+n+"</span></div>                   </div>                </td>              </tr>            </table>        </div>      </td>    </tr>  </table></div>",ie4&&!opera?(layer.innerHTML+='<iframe id="ieFix" frameborder="0" width="'+$("#hDiv")[0].offsetWidth+'" height="'+$("#hDiv")[0].offsetHeight+'"></iframe>',layer.style.display="block"):layer.style.display="block")},hideInfo:function(){"object"==typeof layer&&(layer.innerHTML="",layer.style.display="none")},toggle:function(e){0!=e&&("none"==$("#more"+e).css("display")?($("#more"+e).fadeIn("normal"),$("#img"+e).prop("src","../inc/images/collapse.gif")):($("#more"+e).fadeOut("normal"),$("#img"+e).prop("src","../inc/images/expand.gif")))},fadetoggle:function(e){0!=e&&($("#more_"+e).fadeToggle("slow","swing"),$("#img_"+e).prop("hidden"==$("#img_"+e).prop("alt")?{alt:"normal",src:"../inc/images/toggle_normal.png"}:{alt:"hidden",src:"../inc/images/toggle_hidden.png"}))},resizeImages:function(){for(var e=0;e<doc.images.length;e++){var t=doc.images[e];if("content"==t.className){var i=t.width,n=t.height;if(0!=dzcp_config.maxW&&i>dzcp_config.maxW&&(t.width=dzcp_config.maxW,t.height=Math.round(n*(dzcp_config.maxW/i)),!DZCP.linkedImage(t))){var a=doc.createElement("span"),o=doc.createElement("a");a.appendChild(doc.createElement("br")),a.setAttribute("class","resized"),a.appendChild(doc.createTextNode("auto resized to "+t.width+"x"+t.height+" px")),o.setAttribute("href",t.src),o.setAttribute("rel","lightbox"),o.appendChild(t.cloneNode(!0)),t.parentNode.appendChild(a),t.parentNode.replaceChild(o,t),DZCP.initLightbox()}}}},linkedImage:function(e){do if(e=e.parentNode,"A"==e.nodeName)return!0;while("TD"!=e.nodeName&&"BODY"!=e.nodeName);return!1},calSwitch:function(e,t){var i=$.ajax({url:"../inc/ajax.php?i=kalender&month="+e+"&year="+t,type:"GET",data:{},cache:!1,dataType:"html",contentType:"application/x-www-form-urlencoded;"});i.done(function(e){$("#navKalender").html(e).hide().fadeIn("normal")})},teamSwitch:function(e){clearTimeout(mTimer[1]),$("#navTeam").load("../inc/ajax.php?i=teams&tID="+e,DZCP.initTicker("teams","h",60))},ajaxVote:function(e){return DZCP.submitButton("contentSubmitVote"),$.post("../votes/index.php?action=do&ajax=1&what=vote&id="+e,$("#navAjaxVote").serialize(),function(e){$("#navVote").html(e)}),!1},ajaxFVote:function(e){return DZCP.submitButton("contentSubmitFVote"),$.post("../votes/index.php?action=do&fajax=1&what=fvote&id="+e,$("#navAjaxFVote").serialize(),function(e){$("#navFVote").html(e)}),!1},ajaxPreview:function(e){DZCP.DebugLogger("Ajax Preview -> Tag: '"+e+"'");for(var t=doc.getElementsByTagName("textarea"),i=0;i<t.length;i++){var n=t[i].className,a=t[i].id;if("editorStyle"==n||"editorStyleWord"==n||"editorStyleNewsletter"==n){var o=tinyMCE.getInstanceById(a);$("#"+a).prop("value",o.getBody().innerHTML)}}$("#previewDIV").html('<div style="width:100%;text-align:center"> <img src="../inc/images/admin/loading.gif" alt="" /></div>');var r="";"cwForm"==e&&$("input[type=file]").each(function(){r=r+"&"+$(this).prop("name")+"="+$(this).prop("value")});var c=prevURL;$.post(c,$("#"+e).serialize()+r,function(e){$("#previewDIV").html(e).hide().fadeIn("fast"),DZCP.resizeImages()})},del:function(e){return e=e.replace(/\+/g," "),e=e.replace(/oe/g,"ö"),confirm(e+"?")},hideForumFirst:function(){$("#allkat").prop("checked",!1)},hideForumAll:function(){for(var e=0;e<doc.forms.search.elements.length;e++){var t=doc.forms.search.elements[e];t.id.match(/k_/g)&&(t.checked=!1)}},submitButton:function(e){return submitID=e?e:"contentSubmit",$("#"+submitID).prop("disabled",!0),$("#"+submitID).css("color","#909090"),$("#"+submitID).css("cursor","default"),!0},initTicker:function(e,t,i){DZCP.DebugLogger("Initiation Newticker"),tickerTo[tickerc]="h"==t||"v"==t?t:"v",tickerSpeed[tickerc]=parseInt(i)<=10?10:parseInt(i);var n=$("#"+e).html(),a='  <div id="scrollDiv'+tickerc+'" class="scrollDiv" style="position:relative;left:0;z-index:1">';a+='    <table id="scrollTable'+tickerc+'" class="scrolltable"  cellpadding="0" cellspacing="0">',a+="      <tr>",a+='        <td onmouseover="clearTimeout(mTimer['+tickerc+'])" onmouseout="DZCP.startTickerDiv('+tickerc+')">';for(var o=0;10>o;o++)a+=n;a+="        </td>",a+="      </tr>",a+="    </table>",a+="  </div>",$("#"+e).html(a),window.setTimeout("DZCP.startTickerDiv("+tickerc+");",1500),tickerc++},startTickerDiv:function(e){tableObj=$("#scrollTable"+e)[0],obj=tableObj.parentNode,objWidth="h"==tickerTo[e]?tableObj.offsetWidth:tableObj.offsetHeight,newWidth=2*Math.floor(objWidth/2)+2,obj.style.width=newWidth,mTimer[e]=setInterval("DZCP.moveDiv('"+obj.id+"', "+newWidth+", "+e+");",tickerSpeed[e])},moveDiv:function(e,t,i){var n=$("#"+e)[0];"h"==tickerTo[i]?n.style.left=parseInt(n.style.left)<=0-t/2+2?0:parseInt(n.style.left)-1+"px":n.style.top=""==n.style.top||parseInt(n.style.top)<0-t/2+6?0:parseInt(n.style.top)-1+"px"},GoToAnchor:function(){DZCP.empty(dzcp_config.AnchorMove)||(DZCP.DebugLogger("GoToAnchor -> Tag: '"+dzcp_config.AnchorMove+"'"),$("html, body").animate({scrollTop:$("#"+dzcp_config.AnchorMove).offset().top-12},"slow"))},empty:function(e){return null==e||$.noop(e)||!/\S/.test(e)},DebugLogger:function(e){dzcp_config.debug&&console.info("DZCP Debug: "+e)}};$(document).ready(function(){DZCP.init()}),$(window).load(function(){DZCP.resizeImages(),DZCP.GoToAnchor()});